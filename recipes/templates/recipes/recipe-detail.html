{% extends "base.html" %} 
{% load static %} 

{% block title %} 
  {{ recipe.title }}
{%endblock %} 

{% block css_files %} 
  <link rel="stylesheet" href="{% static "/recipes/recipe-detail.css" %}"/> 
{% endblock %} 

{% block navbar %}
  <nav class="navbar navbar-expand-md navbar-light">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="{% url "recipes-page" %}">Find Other Recipes</a>
      </li>
    </ul>
  </nav>
{% endblock %} 

{% block content %}
  <section id="intro">
    <div class="container-lg">
      <div class="row justify-content-center align-items-center">
        <div class="col-md-5 text-center d-none d-md-block">
          <!-- tooltip -->
          <span class="tt" data-bs-placement="bottom" title="{{ recipe.title }}">
            <img class="img-fluid" src="{{ recipe.image.url }}" alt="recipe-cover" />
          </span>
        </div>
        <div class="col-md-5 text-center text-md-end">
          <h1>
            <div class="display-2">{{ recipe.title }}</div>
            <div class="display-5 text-muted">{{ recipe.excerpt }}</div>
          </h1>
          <p class="lead my-4 text-muted">{{ recipe.description }}</p>
          <div class="my-4">
            {% for tag in search_filters %}
              <span class="tag">{{ tag }}</span>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="process">
    <div class="recipe-card container-fluid">
      <div class="left-section">
        <h1>{{ recipe.title }} Recipe</h1>
        <h2>Ingredients</h2>
        <ul class="ingredients">
          {% for ingredient in recipe.ingredients.all %}
            <li>{{ ingredient.name }} : {{ ingredient.amount }}</li>
          {% endfor %}
        </ul>
        <h2>Procedure</h2>
        <ol class="directions">
          {% for steps in recipe.procedure.all %}
            <li>{{ steps.step }}</li>
          {% endfor %}
        </ol>
      </div>
      <div class="right-section">
        <img src="{{ recipe.cover.url }}" alt="anish0m's Recipe" class="recipe-image">
      </div>
    </div>
  </section>

  {% load filters %}

  <section id="reviews" class="bg-light">
    <div class="container-lg">
      <div class="text-center">
        <h2><i class="bi bi-chat-dots"></i> Reviews on this Recipe</h2>
        <p class="lead">
          <a href="#">Share your thoughts here...</a>
        </p>
      </div>
      <div class="row justify-content-center my-5">
        <div class="col-lg-8">
          <div class="list-group">
            {% for comment in comments %}
              <div class="list-group-item py-3">
                <div class="pb-2">
                  {{ comment.rating|render_stars|safe }}
                </div>
                <h5 class="mb-1">{{ comment.username }}</h5>
                <p class="mb-1">{{ comment.text }}</p>
                <small>{{ comment.created_at|date:"F j, Y" }}</small>
              </div>
            {% empty %}
              <div class="list-group-item py-3 text-center">
                <p class="mb-1 text-muted">No comments yet. Be the first to share your thoughts!</p>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </section>
  
{% endblock %}
